<!DOCTYPE html>

<html>
    <head>
        <title>梅花易数 V0.1</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="https://apps.bdimg.com/libs/jquerymobile/1.4.5/jquery.mobile-1.4.5.min.css">
        <script src="https://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="https://apps.bdimg.com/libs/jquerymobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        
        <script type="text/javascript" src="js/农历Utils.js"></script>
        
        <script type="text/javascript">
            $(init);
            
            function init() {
                var date = new Date();
                setDateInUI(date);
                
                $("#btn-random-date").on("click", () => {
                    var date = 农历Utils.getRandomDate();
                    setDateInUI(date);
                });
                
                $("#btn-today").on("click", () => {
                    var date = new Date();
                    setDateInUI(date);
                });
            }
            
            function setDateInUI(date) {
                var year = date.getFullYear();
                var month = date.getMonth() + 1;
                var dateday = date.getDate();
                
                var hour = date.getHours();
                var min = date.getMinutes();
                
                if (month < 10) {
                    month = "0" + month;
                }
                
                if (dateday < 10) {
                    dateday = "0" + dateday;
                }
                
                if (hour < 10) {
                    hour = "0" + hour;
                }

                if (min < 10) {
                    min = "0" + min;
                }
                
                $("#gongli-date").val("" + year + "-" + month + "-" + dateday);
                $("#gongli-hourmin").val("" + hour + ":" + min);
            }
        </script>
    </head>

    <body>
        <div data-role="page">
            <div data-role="header" data-position="fixed" style="overflow: hidden;">
                <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-icon-arrow-l ui-btn-icon-notext ui-mini"></a>
                <h1>按公历起卦</h1>
            </div>

            <div role="main" class="ui-content">
                <form action="jiegua.html" method="get" data-ajax="false">
                    <label for="gongli-date">日期:</label>
                    <input name="gongli-date" id="gongli-date" type="date" />
                    <label for="gongli-hourmin">时分:</label>
                    <input name="gongli-hourmin" id="gongli-hourmin" type="time" />
                    
                    <!--<div class="ui-grid-a ui-responsive">-->
                    <div class="ui-grid-a">
                        <div class="ui-block-a"><input type="button" data-icon="calendar" id="btn-random-date" value="随机日期" /></div>
                        <div class="ui-block-b"><input type="button" data-icon="navigation" id="btn-today" value="返回今日" /></div>
                    </div>
                    <input type="submit" data-icon="power" data-iconpos="top" value="确定" />
                    <!--<input type="text" id="output" />-->
                </form>
            </div>
            
            <div data-role="footer" data-position="fixed" style="overflow: hidden;">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#" data-icon="video" class="ui-state-persist ui-btn-active">运指乾坤</a></li>
                        <li><a href="#" data-icon="star">原文赏析</a></li>
                        <li><a href="#" data-icon="edit">精研周易</a></li>
                        <li><a href="#" data-icon="user">关于应用</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html>